# REQ-001-01: harborix基盤 概要

## 概要

harborixは複数アプリを統合管理するダッシュボード基盤である。Harbor（港）のように様々なアプリが集まる拠点として、統一されたUXで各種アプリを提供する。

## アプリ一覧

| アプリ名 | 概要 | ドキュメント |
| -------- | ---- | ------------ |
| coinship | 家計簿アプリ | REQ-002 |
| libship | 読書管理アプリ | REQ-003 |
| fanship | 推し活管理アプリ | REQ-004 |

## 機能要件

### 1. 認証機能

| 項目         | 内容                              |
| ------------ | --------------------------------- |
| 認証方式     | SSO（シングルサインオン）         |
| 範囲         | harborix + 全連携アプリで認証共有 |
| ユーザー管理 | 複数ユーザー対応（必須）          |

#### 認証フロー

```text
ユーザー → harborix（ログイン）→ 認証済み
         → coinship → 認証済み（再ログイン不要）
         → libship  → 認証済み（再ログイン不要）
         → fanship  → 認証済み（再ログイン不要）
```

### 2. ダッシュボード機能

| 項目       | 内容                     |
| ---------- | ------------------------ |
| メイン画面 | アプリ一覧表示           |
| アプリ管理 | 動的に追加・非表示が可能 |
| 拡張性     | 将来のアプリ追加を考慮   |

### 3. 共通UIライブラリ（@harborix/ui）

全アプリで使用する共通UIコンポーネントライブラリ。

| 機能 | 内容 |
| ---- | ---- |
| 基本コンポーネント | Button, Card, Input, Modal, Table等 |
| レイアウト | Container, Grid, Stack, Sidebar等 |
| ナビゲーション | Header, BottomNav, Breadcrumb等 |
| フォーム | Form, Select, DatePicker, Checkbox等 |
| フィードバック | Toast, Alert, Dialog, Loading等 |
| テーマ | ダークモード/ライトモード切り替え |

#### テーマシステム

| 項目 | 内容 |
| ---- | ---- |
| ライトモード | デフォルトの明るいテーマ |
| ダークモード | 目に優しい暗いテーマ |
| 切り替え方法 | ユーザー設定 or システム設定に追従 |
| 実装方式 | CSS変数 + React Context |

#### アーキテクチャ

```text
@harborix/ui
├── theme/
│   ├── light.ts          # ライトモードの色定義
│   ├── dark.ts           # ダークモードの色定義
│   ├── tokens.ts         # デザイントークン
│   └── ThemeProvider.tsx # テーマ切り替えContext
├── components/
│   ├── Button/
│   ├── Card/
│   ├── Input/
│   └── ...
└── index.ts              # エクスポート
```

### 4. 共通認証モジュール（@harborix/auth）

全アプリで使用する認証モジュール。

| 機能 | 内容 |
| ---- | ---- |
| SSO認証 | 一度のログインで全アプリにアクセス |
| セッション管理 | トークンの自動更新 |
| 認証ガード | 未認証ユーザーのリダイレクト |
| ユーザー情報取得 | 認証済みユーザーの情報取得 |

## 非機能要件

### パフォーマンス

- 初期表示: 3秒以内（目標）

### セキュリティ

- OWASP Top 10 対策
- 認証トークンの安全な管理

### コスト

- 少額運用を目指す
- 無料枠を最大限活用

### 対応デバイス

| デバイス | 対応 |
| -------- | ---- |
| PC（デスクトップ） | フル機能 |
| タブレット | フル機能（レスポンシブ） |
| スマートフォン | 基本機能（PWA） |

## 想定ユーザー

- 開発者本人（メイン）
- 将来的に他ユーザーも利用可能

## 決定事項

| 項目             | 決定内容                       |
| ---------------- | ------------------------------ |
| ユーザー権限管理 | is_adminフラグで管理（管理者はアプリ管理権限を持つ） |
| アプリ一覧管理   | DB管理（柔軟に追加・編集可能） |

## 未決定事項

※技術スタックは基本設計フェーズで決定

## 変更履歴

- 2026-02-12: 権限管理をis_adminフラグ方式に決定
- 2026-02-11: 技術スタックを削除（基本設計で決定）
- 2026-02-11: 共通UIライブラリ、テーマシステムを追加
- 2026-02-11: 初版作成
